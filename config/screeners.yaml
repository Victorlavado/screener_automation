# Screeners configuration
# Replicates TradingView screeners

screeners:
  # CANSLIM - Growth + Technical setup
  canslim:
    description: "CANSLIM: Revenue growth >25%, EMA10>SMA20, Price<SMA50"
    universe: us_eu
    requirements:
      # Market cap: 150M to 1,500T USD
      - field: market_cap
        operator: ">="
        value: 150000000  # 150M
      - field: market_cap
        operator: "<="
        value: 1500000000000000  # 1,500T
      # Revenue growth, Quarterly YoY > 25%
      - field: revenue_growth
        operator: ">="
        value: 0.25  # 25%
      # Avg Volume 60D > 800K
      - field: volume_sma_60
        operator: ">="
        value: 800000
      # ADR 3% to 1000%
      - field: adr_pct
        operator: ">="
        value: 3
      - field: adr_pct
        operator: "<="
        value: 1000
      # EMA(10) > SMA(20)
      - field: ema_10
        operator: ">"
        reference: sma_20
      # Volume > 500K
      - field: volume
        operator: ">="
        value: 500000
      # Price < SMA(50)
      - field: close
        operator: "<"
        reference: sma_50
    postprocess:
      sort_by: revenue_growth
      sort_order: desc

  # Alternative CANSLIM - EPS growth instead of Revenue
  alternative_canslim:
    description: "Alternative CANSLIM: EPS growth >25%, EMA10>SMA20, Price<SMA50"
    universe: us_eu
    requirements:
      # Market cap: 150M to 1,500T USD
      - field: market_cap
        operator: ">="
        value: 150000000  # 150M
      - field: market_cap
        operator: "<="
        value: 1500000000000000  # 1,500T
      # EPS diluted growth, Quarterly YoY > 25%
      - field: earnings_growth
        operator: ">="
        value: 0.25  # 25%
      # Avg Volume 60D > 800K
      - field: volume_sma_60
        operator: ">="
        value: 800000
      # ADR 3% to 1000%
      - field: adr_pct
        operator: ">="
        value: 3
      - field: adr_pct
        operator: "<="
        value: 1000
      # EMA(10) > SMA(20)
      - field: ema_10
        operator: ">"
        reference: sma_20
      # Volume > 500K
      - field: volume
        operator: ">="
        value: 500000
      # Price < SMA(50)
      - field: close
        operator: "<"
        reference: sma_50
    postprocess:
      sort_by: earnings_growth
      sort_order: desc

  # Strongest 1M 50% - Extreme momentum
  strongest_1m:
    description: "Strongest 1M: Stocks up >50% in last month"
    universe: us_eu
    requirements:
      # Market cap: 300M to 3,000T USD
      - field: market_cap
        operator: ">="
        value: 300000000  # 300M
      - field: market_cap
        operator: "<="
        value: 3000000000000000  # 3,000T
      # Volatility 1M > 5%
      - field: volatility_1m
        operator: ">="
        value: 5
      # Avg Volume 30D > 300K
      - field: volume_sma_30
        operator: ">="
        value: 300000
      # Volume > 100K
      - field: volume
        operator: ">="
        value: 100000
      # Perf 1M > 50%
      - field: pct_change_1m
        operator: ">="
        value: 50
    postprocess:
      sort_by: pct_change_1m
      sort_order: desc

  # =========================================================================
  # MOMENTUM SCREENERS (US + EU)
  # =========================================================================

  # Strongest 1M 30%
  strongest_1m_30:
    description: "Strongest 1M 30%: Stocks up >30% in last month (US+EU)"
    universe: us_eu
    requirements:
      - field: market_cap
        operator: ">="
        value: 300000000  # 300M
      - field: market_cap
        operator: "<="
        value: 3000000000000000  # 3,000T
      - field: volatility_1m
        operator: ">="
        value: 5
      - field: volume_sma_30
        operator: ">="
        value: 300000
      - field: volume
        operator: ">="
        value: 100000
      - field: pct_change_1m
        operator: ">="
        value: 30
    postprocess:
      sort_by: pct_change_1m
      sort_order: desc

  # Strongest 3M 50%
  strongest_3m_50:
    description: "Strongest 3M 50%: Stocks up >50% in last 3 months (US+EU)"
    universe: us_eu
    requirements:
      - field: market_cap
        operator: ">="
        value: 300000000  # 300M
      - field: market_cap
        operator: "<="
        value: 3000000000000000  # 3,000T
      - field: volatility_1m
        operator: ">="
        value: 5
      - field: volume_sma_30
        operator: ">="
        value: 300000
      - field: volume
        operator: ">="
        value: 100000
      - field: pct_change_3m
        operator: ">="
        value: 50
    postprocess:
      sort_by: pct_change_3m
      sort_order: desc

  # Strongest 6M 100%
  strongest_6m_100:
    description: "Strongest 6M 100%: Stocks up >100% in last 6 months (US+EU)"
    universe: us_eu
    requirements:
      - field: market_cap
        operator: ">="
        value: 300000000  # 300M
      - field: market_cap
        operator: "<="
        value: 3000000000000000  # 3,000T
      - field: volatility_1m
        operator: ">="
        value: 5
      - field: volume_sma_30
        operator: ">="
        value: 300000
      - field: volume
        operator: ">="
        value: 100000
      - field: pct_change_6m
        operator: ">="
        value: 100
    postprocess:
      sort_by: pct_change_6m
      sort_order: desc

  # New Relative Strength
  new_rs:
    description: "New RS: Stocks showing new relative strength (US+EU)"
    universe: us_eu
    requirements:
      - field: pct_change_3m
        operator: ">="
        value: 15
      - field: volume_sma_30
        operator: ">="
        value: 300000
      - field: pct_change_1y
        operator: ">="
        value: 0
      - field: pct_change_1m
        operator: ">="
        value: 10
      - field: pct_change_6m
        operator: "between"
        value: [-25, 25]
    postprocess:
      sort_by: pct_change_1m
      sort_order: desc

  # =========================================================================
  # POST-FILTERS (applied on results from regular screeners above)
  # =========================================================================

  # Scan Below EMA 5 — price is 0-5% above EMA(5)
  scan_below_ema5:
    description: "Scan Below EMA5: EMA(5) below price by 0-5%, SMA10>SMA20, pullback"
    post_filter: true
    requirements:
      - field: ema5_distance_pct
        operator: "between"
        value: [0, 5]
      - field: sma_10
        operator: ">"
        reference: sma_20
      - field: pct_change_5d
        operator: "<"
        value: 5
      - field: volatility_1m
        operator: ">="
        value: 3.5

  # Scan Above EMA 5 — price is 0-5% below EMA(5)
  scan_above_ema5:
    description: "Scan Above EMA5: EMA(5) above price by 0-5%, SMA10>SMA20, pullback"
    post_filter: true
    requirements:
      - field: ema5_distance_pct
        operator: "between"
        value: [-5, 0]
      - field: sma_10
        operator: ">"
        reference: sma_20
      - field: pct_change_5d
        operator: "<"
        value: 5
      - field: volatility_1m
        operator: ">="
        value: 3.5

# Global settings
settings:
  # Combine results from multiple screeners
  consolidation: union  # union | intersection

  # Global exclusions (applied to final results)
  exclude_symbols: []

  # Remove duplicates in final output
  deduplicate: true

# =============================================================================
# Field Reference
# =============================================================================
# Technical (calculated from OHLCV):
#   - close, open, high, low, volume
#   - sma_X (10, 20, 50, 100, 200)
#   - ema_X (5, 10, 20, 50)
#   - rsi_14
#   - volume_sma_X (20, 30, 50, 60)
#   - pct_change_Xd (1, 5, 20, 60)
#   - pct_change_1m (≈21 trading days)
#   - pct_change_3m (≈63 trading days)
#   - pct_change_6m (≈126 trading days)
#   - pct_change_1y (≈250 trading days)
#   - adr_pct (Average Daily Range as %)
#   - volatility_1m (1-month volatility as %)
#   - ema5_distance_pct (% distance of price from EMA5: positive=price above)
#
# Fundamentals (from yfinance, when available):
#   - market_cap
#   - pe_ratio
#   - revenue_growth (quarterly YoY)
#   - earnings_growth (EPS growth quarterly YoY)
#   - profit_margin
#   - debt_to_equity
#
# Special flags:
#   - post_filter: true  → screener runs on consolidated results of regular screeners
